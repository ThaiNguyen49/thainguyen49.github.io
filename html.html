<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>LIN FU ‚Äî HTML Studio</title>
<meta name="description" content="Studio vi·∫øt HTML: so·∫°n th·∫£o, xem tr∆∞·ªõc tr·ª±c ti·∫øp, ch√®n m·∫´u, ki·ªÉm tra l·ªói v√† h∆∞·ªõng d·∫´n chuy√™n nghi·ªáp."/>
<style>
  :root{
    --bg:#0f1221; --panel:#14182a; --soft:#1b2140; --ink:#e9eefc; --muted:#a7b1d6;
    --brand:#7c9bff; --brand2:#a1e3ff; --accent:#17d3b0; --warn:#ffb86b; --danger:#ff6b6b;
    --line:#263055; --ok:#2dd4bf;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;background:linear-gradient(180deg,#0b0f1d,#121634);color:var(--ink)}
  a{color:var(--brand)}
  .app{max-width:1200px;margin:auto;padding:16px}
  header{
    position:sticky;top:0;z-index:10;
    background:linear-gradient(180deg,rgba(18,22,52,.95),rgba(18,22,52,.75));
    backdrop-filter:saturate(160%) blur(8px);
    border-bottom:1px solid #1f2550;
  }
  .head{max-width:1200px;margin:auto;padding:12px 16px;display:flex;gap:14px;align-items:center;justify-content:space-between}
  .brand{display:flex;align-items:center;gap:12px;font-weight:800;letter-spacing:.2px}
  .logo{width:34px;height:34px;border-radius:10px;background:conic-gradient(from 210deg at 50% 50%, var(--brand), var(--brand2), var(--accent), var(--brand));box-shadow:0 0 0 2px rgba(124,155,255,.25), 0 12px 24px rgba(0,0,0,.3)}
  .tag{font-size:12px;color:var(--muted)}
  .toolbar{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
  button{border:1px solid #2a3161;background:linear-gradient(180deg,#1b2247,#141a36);color:#e8eeff;padding:8px 12px;border-radius:10px;cursor:pointer;font-weight:700;letter-spacing:.3px;transition:transform .15s ease, box-shadow .15s ease}
  button:hover{box-shadow:0 6px 18px rgba(0,0,0,.25);transform:translateY(-1px)}
  .primary{border-color:#3d58ff;background:linear-gradient(180deg,#2a44c9,#1e2c8f)}
  .ghost{background:transparent}
  .success{border-color:#1e7b6e;background:linear-gradient(180deg,#1c3f3a,#152b27)}
  .warn{border-color:#8b5a18;background:linear-gradient(180deg,#2a1f11,#1c140b)}
  .grid{display:grid;grid-template-columns:1.1fr 1fr;gap:14px;margin-top:16px}
  @media (max-width:900px){.grid{grid-template-columns:1fr}}
  .card{background:linear-gradient(180deg,#161b35,#0f142d);border:1px solid #212a5a;border-radius:16px;padding:12px;box-shadow:0 18px 40px rgba(4,7,19,.45)}
  .card h2{margin:6px 8px 12px;font-size:16px;color:#cfe2ff}
  /* Editor */
  .editor-wrap{position:relative;border-radius:12px;overflow:hidden}
  .editor{width:100%; height:460px; resize:vertical;background:#0b0f26; color:#e7ecff; font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;border:1px solid #1f274f; border-radius:12px; padding:14px 16px 14px 48px; line-height:1.55;caret-color:#7c9bff; tab-size:2}
  .linenos{position:absolute; inset:1px auto 1px 1px; width:42px; padding:14px 8px; text-align:right;color:#7f8ac2; background:linear-gradient(180deg,#0d1130,#0c0f27); border-right:1px solid #1f274f;font:600 12px/1.55 ui-monospace,Menlo,Consolas,monospace; user-select:none; overflow:hidden}
  .status{margin-top:8px; display:flex; gap:10px; flex-wrap:wrap; align-items:center; color:#b8c1f0; font-size:12px}
  .dot{display:inline-block; width:8px; height:8px; border-radius:50%}
  .dot.ok{background:var(--ok)} .dot.err{background:var(--danger)}
  /* Preview */
  .preview{width:100%; height:460px; border-radius:12px; border:1px solid #213066; overflow:hidden;background:linear-gradient(180deg,#0e1231,#0a0d24)}
  iframe{width:100%;height:100%;border:0;background:white}
  .chips{display:flex; gap:8px; flex-wrap:wrap}
  .chip{font-size:12px; padding:6px 10px; border-radius:999px; border:1px solid #2a3161; color:#d8e2ff;background:linear-gradient(180deg,#1a1f45,#10153a); cursor:pointer}
  .chip:hover{border-color:#445cf7; box-shadow:0 10px 20px rgba(20,32,120,.25)}
  .kbd{padding:2px 6px;border:1px solid #2c386e;border-radius:6px;background:#0c1130;color:#b8c1f0}
  /* Guide */
  details{border:1px solid #212a5a;border-radius:12px;padding:10px 12px;background:linear-gradient(180deg,#151a37,#0f142d)}
  details+details{margin-top:10px}
  summary{cursor:pointer; font-weight:800; color:#dbe6ff}
  ul{margin:8px 0 4px 18px}
  code{background:#0b1033;border:1px solid #24306a; padding:2px 6px; border-radius:6px}
  .footer{opacity:.8;margin:14px 0 6px;text-align:center;color:#8ea7ff;font-size:12px}

  /* Chatbot */
  .chatbot-toggle{position:fixed;right:16px;bottom:16px;z-index:30;display:flex;align-items:center;gap:8px;padding:10px 12px;border-radius:999px;background:linear-gradient(180deg,#2a44c9,#1e2c8f);border:1px solid #3d58ff;color:#fff;cursor:pointer;box-shadow:0 12px 30px rgba(0,0,0,.35)}
  .chatbot{position:fixed;right:16px;bottom:76px;width:340px;max-height:520px;display:none;flex-direction:column;background:#0c1130;border:1px solid #1f2a55;border-radius:16px;box-shadow:0 20px 50px rgba(0,0,0,.5);overflow:hidden;z-index:40}
  .chatbot header{position:relative;background:linear-gradient(180deg,#1a224a,#0f1636);border:0}
  .chatbot .title{padding:10px 12px;font-weight:800;color:#e8eeff}
  .chatbot .messages{padding:12px;height:320px;overflow:auto;display:flex;flex-direction:column;gap:8px;background:linear-gradient(180deg,#0b102b,#0a0f24)}
  .msg{max-width:80%;padding:8px 10px;border-radius:12px;border:1px solid #1f2a55}
  .msg.bot{background:#0f1734;color:#d8e2ff}
  .msg.me{background:#162447;color:#e9eefc;margin-left:auto}
  .chatbot .input{display:flex;gap:8px;padding:8px;border-top:1px solid #1f2a55;background:#0b1028}
  .chatbot input{flex:1;padding:10px;border-radius:10px;border:1px solid #263166;background:#0a1330;color:#e8eeff}
  .chatbot button{border-color:#2a3161}
</style>
</head>
<body>
  <header>
    <div class="head">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <div>TOOL TEXT LIN FU ‚Äî HTML Studio</div>
          <div class="tag">So·∫°n th·∫£o HTML ‚Ä¢ Xem tr∆∞·ªõc tr·ª±c ti·∫øp ‚Ä¢ H∆∞·ªõng d·∫´n chuy√™n nghi·ªáp</div>
        </div>
      </div>
      <div class="toolbar">
        <button class="primary" id="runBtn">‚ñ∂ Ch·∫°y (Ctrl/‚åò+Enter)</button>
        <button class="ghost" id="autoBtn">‚ö° T·ª± ch·∫°y: T·∫ÆT</button>
        <button class="success" id="downloadBtn">‚¨á T·∫£i xu·ªëng</button>
        <button class="ghost" id="resetBtn">‚ü≤ M·∫´u chu·∫©n</button>
      </div>
    </div>
  </header>

  <main class="app">
    <div class="grid">
      <!-- Editor -->
      <section class="card">
        <h2>Tr√¨nh so·∫°n th·∫£o</h2>
        <div class="chips" id="snippets"></div>
        <div class="editor-wrap">
          <div class="linenos" id="linenos"></div>
          <textarea id="editor" class="editor" spellcheck="false"></textarea>
        </div>
        <div class="status">
          <span><span class="dot ok" id="lintDot"></span> <strong id="lintMsg">ƒêang ch·ªù‚Ä¶</strong></span>
          <span>‚Ä¢ L∆∞u nhanh: <span class="kbd">Ctrl/‚åò+S</span> &nbsp; ‚Ä¢ Th·ª•t d√≤ng: <span class="kbd">Tab/Shift+Tab</span></span>
        </div>
      </section>

      <!-- Preview -->
      <section class="card">
        <h2>Xem tr∆∞·ªõc</h2>
        <div class="preview"><iframe id="preview" title="Xem tr∆∞·ªõc HTML"></iframe></div>
      </section>
    </div>

    <!-- Guides -->
    <section class="card" style="margin-top:16px">
      <h2>üìò H∆∞·ªõng d·∫´n nhanh (Best Practices)</h2>
      <details open>
        <summary>1) Khung HTML chu·∫©n & SEO c∆° b·∫£n</summary>
        <ul>
          <li>D√πng <code>&lt;!doctype html&gt;</code>, ƒë·∫∑t <code>lang</code>, <code>meta charset</code>, <code>viewport</code>.</li>
          <li>Ti√™u ƒë·ªÅ trang ng·∫Øn g·ªçn trong <code>&lt;title&gt;</code> v√† m√¥ t·∫£ trong <code>&lt;meta name="description"&gt;</code>.</li>
          <li>Lu√¥n c√≥ m·ªôt <code>h1</code> duy nh·∫•t m√¥ t·∫£ n·ªôi dung ch√≠nh.</li>
        </ul>
      </details>
      <details>
        <summary>2) Semantics & Accessibility (A11y)</summary>
        <ul>
          <li>D√πng th·∫ª ng·ªØ nghƒ©a: <code>header</code>, <code>nav</code>, <code>main</code>, <code>section</code>, <code>article</code>, <code>footer</code>.</li>
          <li>H√¨nh ·∫£nh c·∫ßn <code>alt</code> r√µ nghƒ©a; n√∫t b·∫•m c√≥ nh√£n d·ªÖ hi·ªÉu.</li>
          <li>Ki·ªÉm tra tab order & contrast; tr√°nh ch·ªâ d·ª±a v√†o m√†u s·∫Øc ƒë·ªÉ truy·ªÅn t·∫£i th√¥ng tin.</li>
        </ul>
      </details>
      <details>
        <summary>3) Responsive & Hi·ªáu nƒÉng</summary>
        <ul>
          <li>D√πng layout linh ho·∫°t (Flex/Grid), k√≠ch th∆∞·ªõc b·∫±ng %, <code>max-width</code>, <code>clamp()</code>.</li>
          <li>T·ªëi ∆∞u ·∫£nh (k√≠ch th∆∞·ªõc, d·∫°ng <code>webp</code>), n√©n CSS/JS khi l√™n production.</li>
          <li>D√πng <code>loading="lazy"</code> cho ·∫£nh/iframe kh√¥ng n·∫±m trong viewport ban ƒë·∫ßu.</li>
        </ul>
      </details>
      <details>
        <summary>4) Checklist ra s·∫£n ph·∫©m</summary>
        <ul>
          <li>Kh√¥ng l·ªói console; HTML h·ª£p l·ªá; ti√™u ƒë·ªÅ/description chu·∫©n; favicon; b·∫£o m·∫≠t form c∆° b·∫£n.</li>
          <li>Test tr√™n mobile/desktop; ki·ªÉm tra focus v√† b√†n ph√≠m; ki·ªÉm tra ƒë·ªô t∆∞∆°ng ph·∫£n.</li>
        </ul>
      </details>
    </section>

    <div class="footer">¬© TOOL TEXT LIN FU ‚Äî HTML Studio. D√πng t·ª± do cho h·ªçc t·∫≠p & c√¥ng vi·ªác.</div>
  </main>

  <!-- Chatbot floating -->
  <button class="chatbot-toggle" id="chatbotToggle">üí¨ Chat tr·ª£ l√Ω</button>
  <div class="chatbot" id="chatbot">
    <header><div class="title">ü§ñ Tr·ª£ l√Ω LIN FU</div></header>
    <div class="messages" id="chatMessages"></div>
    <div class="input">
      <input id="chatInput" placeholder="Nh·∫≠p c√¢u h·ªèi‚Ä¶ (Shift+Enter ƒë·ªÉ xu·ªëng d√≤ng)" />
      <button id="chatSend">G·ª≠i</button>
    </div>
  </div>

<script>
/* ========= BOILERPLATE c·∫ßn ƒë·∫∑t TR∆Ø·ªöC khi d√πng ========= */
const BOILERPLATE = `<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Trang demo LIN FU</title>
  <meta name="description" content="M·∫´u HTML chu·∫©n do LIN FU t·∫°o." />
  <style>
    :root{ --bg:#0f172a; --fg:#e2e8f0; --mut:#94a3b8; --pri:#22d3ee; }
    *{box-sizing:border-box} body{margin:0;background:var(--bg);color:var(--fg);font:16px/1.6 system-ui,Segoe UI,Roboto,Arial}
    .wrap{max-width:920px;margin:40px auto;padding:0 16px}
    header{display:flex;justify-content:space-between;align-items:center;padding:16px;border-radius:14px;background:#0b1220;border:1px solid #0b1b2d}
    .badge{padding:6px 10px;border:1px solid #11314b;border-radius:999px;background:#0a1323;color:#86eaf6}
    .hero{padding:42px 16px}
    .cta{display:inline-block;margin-top:12px;padding:10px 14px;border-radius:10px;border:1px solid #1e2c4d;background:#0a1323;color:#d9f3ff}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:12px;margin-top:18px}
    .card{padding:14px;border:1px solid #13223b;background:#0a1323;border-radius:12px}
    img{max-width:100%;border-radius:12px}
    footer{margin:36px 0 8px;color:var(--mut);text-align:center}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Xin ch√†o, ƒë√¢y l√† <em>LIN FU</em> ‚ú®</h1>
      <span class="badge">HTML chu·∫©n ‚Ä¢ Responsive ‚Ä¢ A11y</span>
    </header>

    <section class="hero">
      <p>ƒê√¢y l√† ph·∫ßn m·ªü ƒë·∫ßu. H√£y thay n·ªôi dung b·∫±ng s·∫£n ph·∫©m c·ªßa b·∫°n.</p>
      <a class="cta" href="#">B·∫Øt ƒë·∫ßu</a>
    </section>

    <section>
      <h2>T√≠nh nƒÉng m·∫´u</h2>
      <div class="grid">
        <article class="card"><h3>Th·∫ª ng·ªØ nghƒ©a</h3><p>D√πng <code>header</code>, <code>main</code>, <code>section</code>, <code>article</code>, <code>footer</code>.</p></article>
        <article class="card"><h3>·∫¢nh lazy</h3><p><img src="https://picsum.photos/560/320" alt="·∫¢nh v√≠ d·ª•" loading="lazy"></p></article>
        <article class="card"><h3>Bi·ªÉu m·∫´u</h3>
          <form onsubmit="event.preventDefault(); alert('G·ª≠i demo!');">
            <label> Email <input type="email" required placeholder="ban@vidu.com" /></label>
            <button type="submit" class="cta">G·ª≠i</button>
          </form>
        </article>
      </div>
    </section>

    <footer>¬© LIN FU ‚Äî Demo</footer>
  </div>
</body>
</html>`;

/* ---------- Snippets ch√®n nhanh ---------- */
const SNIPPETS = [
  {name:"HTML5 + Head chu·∫©n", code:`<!doctype html>\n<html lang="vi">\n<head>\n<meta charset="utf-8" />\n<meta name="viewport" content="width=device-width,initial-scale=1" />\n<title>Trang m·ªõi</title>\n</head>\n<body>\n<h1>Xin ch√†o</h1>\n<p>N·ªôi dung ·ªü ƒë√¢y.</p>\n</body>\n</html>`},
  {name:"Th·∫ª card", code:`<article class="card"><h3>Ti√™u ƒë·ªÅ</h3><p>M√¥ t·∫£ ng·∫Øn‚Ä¶</p></article>`},
  {name:"N√∫t CTA", code:`<a class="cta" href="#">B·∫•m v√†o ƒë√¢y</a>`}
];

// --- Tham chi·∫øu ph·∫ßn t·ª≠ ---
const editor = document.getElementById("editor");
const preview = document.getElementById("preview");
const runBtn = document.getElementById("runBtn");
const autoBtn = document.getElementById("autoBtn");
const resetBtn = document.getElementById("resetBtn");
const downloadBtn = document.getElementById("downloadBtn");
const lintMsg = document.getElementById("lintMsg");
const lintDot = document.getElementById("lintDot");
const linenos = document.getElementById("linenos");
const chips = document.getElementById("snippets");

// T·∫°o chips snippet
for(const s of SNIPPETS){
  const el = document.createElement('button');
  el.className = 'chip';
  el.textContent = s.name;
  el.onclick = () => insertAtCursor(editor, s.code);
  chips.appendChild(el);
}

// Ch√®n ƒëo·∫°n t·∫°i v·ªã tr√≠ con tr·ªè
function insertAtCursor(field, text){
  const start = field.selectionStart, end = field.selectionEnd;
  const before = field.value.substring(0, start);
  const after = field.value.substring(end);
  field.value = before + text + after;
  field.selectionStart = field.selectionEnd = start + text.length;
  field.focus();
  updateLineNumbers();
}

// S·ªë d√≤ng
function updateLineNumbers(){
  const lines = editor.value.split("\n").length;
  linenos.innerHTML = Array.from({length: lines}, (_, i) => i + 1).join("<br>");
}
editor.addEventListener("input", updateLineNumbers);

// Ch·∫°y code v√†o iframe
function runCode(){
  const doc = preview.contentDocument || preview.contentWindow.document;
  doc.open();
  doc.write(editor.value);
  doc.close();
  lintMsg.textContent = "‚úÖ ƒê√£ ch·∫°y th√†nh c√¥ng";
  lintDot.classList.add("ok");
  lintDot.classList.remove("err");
}
runBtn.onclick = runCode;

// T·ª± ƒë·ªông ch·∫°y
let autoRun = false;
autoBtn.onclick = () => {
  autoRun = !autoRun;
  autoBtn.textContent = autoRun ? "‚ö° T·ª± ch·∫°y: B·∫¨T" : "‚ö° T·ª± ch·∫°y: T·∫ÆT";
};
editor.addEventListener("input", () => autoRun && runCode());

// M·∫´u chu·∫©n
resetBtn.onclick = () => { editor.value = BOILERPLATE; updateLineNumbers(); runCode(); };

// T·∫£i xu·ªëng
downloadBtn.onclick = () => {
  const blob = new Blob([editor.value], { type: "text/html" });
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "linfu-demo.html";
  a.click();
};

// Ph√≠m t·∫Øt
window.addEventListener('keydown', (e)=>{
  if((e.ctrlKey||e.metaKey) && e.key.toLowerCase()==='enter'){ e.preventDefault(); runCode(); }
  if((e.ctrlKey||e.metaKey) && e.key.toLowerCase()==='s'){ e.preventDefault(); downloadBtn.click(); }
});

// Kh·ªüi t·∫°o
editor.value = BOILERPLATE;
updateLineNumbers();
runCode();

/* ======== Chatbot d√πng API th·∫≠t ======== */
const botToggle = document.getElementById('chatbotToggle');
const bot = document.getElementById('chatbot');
const chatList = document.getElementById('chatMessages');
const chatInput = document.getElementById('chatInput');
const chatSend = document.getElementById('chatSend');

const API_KEY = "sk-jOLCGXFQkd5IMXGWkA4cXY8nBIM1sxIAjH1K2zC2TDGsxZYC";
const BASE_URL = "https://gpt2.shupremium.com/v1";

botToggle.onclick = ()=>{ 
  bot.style.display = bot.style.display === 'flex' ? 'none' : 'flex'; 
  chatInput.focus(); 
};

function appendMsg(text, who='bot'){
  const div = document.createElement('div');
  div.className = `msg ${who}`;
  div.textContent = text;
  chatList.appendChild(div);
  chatList.scrollTop = chatList.scrollHeight;
}

async function askBot(prompt) {
  try {
    const res = await fetch(`${BASE_URL}/chat/completions`, {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": `Bearer ${API_KEY}`
      },
      body: JSON.stringify({
        model: "gpt-4o-mini",
        messages: [
          { role: "system", content: "B·∫°n l√† tr·ª£ l√Ω LIN FU, n√≥i chuy·ªán th√¢n thi·ªán, gi√∫p ng∆∞·ªùi d√πng HTML Studio." },
          { role: "user", content: prompt }
        ]
      })
    });
    const data = await res.json();
    return data?.choices?.[0]?.message?.content || "Kh√¥ng c√≥ ph·∫£n h·ªìi.";
  } catch (err) {
    return "‚ùå L·ªói k·∫øt n·ªëi API: " + err.message;
  }
}

async function send(){
  const text = chatInput.value.trim();
  if(!text) return;
  appendMsg(text, "me");
  chatInput.value = "";
  appendMsg("ƒêang tr·∫£ l·ªùi...", "bot");

  const reply = await askBot(text);
  document.querySelector(".msg.bot:last-child").textContent = reply;
}

chatSend.onclick = send;
chatInput.addEventListener("keydown", e=>{
  if(e.key === "Enter" && !e.shiftKey){ e.preventDefault(); send(); }
});

appendMsg("Xin ch√†o! üëã M√¨nh l√† tr·ª£ l√Ω LIN FU ‚Äì ƒë√£ k·∫øt n·ªëi API th√†nh c√¥ng!");

</script>
</body>
</html>
